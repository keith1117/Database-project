{% extends 'layout.html' %}
{% block title %}Reports{% endblock %}
{% block content %}
<h1>Tickets Sold Reports</h1>
<form method="POST">
  <input type="hidden" name="mode" value="range">
  <label>Start <input type="date" name="start"></label>
  <label>End <input type="date" name="end"></label>
  <button>Run</button>
</form>
<form method="POST" style="margin-top:8px">
  <input type="hidden" name="mode" value="last_month">
  <button>Last Month</button>
</form>
<form method="POST" style="margin-top:8px">
  <input type="hidden" name="mode" value="last_year">
  <button>Last Year</button>
</form>
{% if rows %}
  <h2>Result</h2>
  <table border="1" cellpadding="6">
    <tr><th>Period</th><th>Tickets</th></tr>
    {% for r in rows %}
      <tr><td>{{ r.day or r.ym }}</td><td>{{ r.tickets }}</td></tr>
    {% endfor %}
  </table>
{% endif %}
{% endblock %}